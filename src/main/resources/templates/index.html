<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/header :: head('홈')}"></head>
<body>

<div th:replace="~{fragments/header :: navbar}"></div>

<main class="container">

  <!-- Hero Section -->
  <section class="hero">
    <h1 class="hero-title">Muse</h1>
    <p class="hero-subtitle">음악과 함께하는 당신의 취향 여정</p>
  </section>

  <!-- 비로그인 상태 -->
  <div th:if="${session.LOGIN_USER == null}" class="card welcome-card">
    <h2 class="card-title">🎵 Muse에 오신 것을 환영합니다</h2>
    <p class="card-text">로그인하면 나만의 추천, 리뷰 기능을 사용할 수 있습니다.</p>
    <a th:href="@{/login}" class="btn-primary">로그인 하러가기</a>
  </div>

  <!-- 로그인 상태 -->
  <div th:if="${session.LOGIN_USER != null}">

    <!-- 환영 메시지 -->
    <div class="welcome-message">
      <p class="greeting">
        <strong th:text="${session.LOGIN_USER.nickname}">닉네임</strong> 님, 환영합니다! 👋
      </p>
    </div>

    <!-- 콜드스타트: 추천 불가 -->
    <div th:if="${coldStart}" class="card cold-start-card">
      <div class="card-icon">🎼</div>
      <h2 class="card-title">아직 추천을 만들기 어려워요</h2>
      <p class="card-text">
        먼저 몇 곡에 별점을 남겨주면,<br/>
        당신의 취향을 학습해서 홈에서 추천 곡을 보여드릴게요.
      </p>
      <a th:href="@{/songs}" class="btn-primary">곡 리스트 보러가기</a>
    </div>

    <!-- 추천 가능 -->
    <div th:if="${!coldStart}" class="recommendations-section">
      <div class="section-header">
        <h2 class="section-title">나를 위한 추천 곡</h2>
        <a th:href="@{/recommendations}" class="link-more">추천 더 보기 →</a>
      </div>

      <div class="song-grid">
        <div th:each="item : ${recommendations}" class="song-card">
          <a th:href="@{'/songs/' + ${item.songId}}" class="song-card-link">
            <div class="song-info">
              <h3 class="song-title" th:text="${item.title}">곡 제목</h3>
              <p class="song-artist" th:text="${item.artist}">아티스트</p>
            </div>
          </a>
        </div>
      </div>
    </div>

  </div>

</main>

</body>
</html>
