<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/header :: head('관리자 - 사용자 관리')}"></head>
<body>
<div th:replace="~{fragments/header :: navbar}"></div>

<main class="container">

  <div class="page-header">
    <div>
      <h1 class="page-title">관리자 - 사용자 관리</h1>
      <p class="admin-info">
        <span th:text="${loginUser.nickname}">관리자</span> 님으로 로그인됨
      </p>
    </div>
    <a th:href="@{/admin/profanity}" class="btn-primary">비속어 모니터링</a>
  </div>

  <div class="admin-table-container">
    <table class="admin-table">
      <thead>
      <tr>
        <th>ID</th>
        <th>이메일</th>
        <th>닉네임</th>
        <th>Role</th>
        <th>Status</th>
        <th>액션</th>
      </tr>
      </thead>
      <tbody>
      <tr th:each="u : ${users}">
        <td th:text="${u.id}">1</td>
        <td th:text="${u.email}">email@example.com</td>
        <td>
          <a th:href="@{'/users/' + ${u.id}}"
             class="admin-user-link"
             th:text="${u.nickname}">닉네임</a>
        </td>
        <td>
          <form th:action="@{'/admin/users/' + ${u.id}}"
                method="post"
                class="admin-form">
            <select name="role" class="admin-select">
              <option th:each="r : ${roles}"
                      th:value="${r.name()}"
                      th:text="${r.name()}"
                      th:selected="${r == u.role}">
              </option>
            </select>
        </td>
        <td>
          <select name="status" class="admin-select">
            <option th:each="s : ${statuses}"
                    th:value="${s.name()}"
                    th:text="${s.name()}"
                    th:selected="${s == u.status}">
            </option>
          </select>
        </td>
        <td>
          <button type="submit" class="btn-admin">저장</button>
          </form>
        </td>
      </tr>
      </tbody>
    </table>
  </div>

</main>
</body>
</html>
