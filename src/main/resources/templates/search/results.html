<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/header :: head('검색 결과')}"></head>
<body>

<div th:replace="~{fragments/header :: navbar}"></div>

<main class="container">

  <div class="page-header">
    <h1 class="page-title">검색 결과</h1>
  </div>

  <!-- 검색 폼 -->
  <div class="search-box">
    <form th:action="@{/search}" method="get" class="search-form-large">
      <input type="text"
             name="query"
             th:value="${query}"
             placeholder="검색어를 입력하세요"
             class="search-input-large">
      <button type="submit" class="btn-primary">검색</button>
    </form>
  </div>

  <!-- 빈 검색어 -->
  <div th:if="${emptyQuery}" class="empty-state">
    <p>검색어를 입력해주세요.</p>
  </div>

  <!-- 검색 결과 -->
  <div th:if="${!emptyQuery}">
    <p class="search-query-text">
      "<strong th:text="${query}">쿼리</strong>" 에 대한 검색 결과입니다.
    </p>

    <!-- 곡 결과 -->
    <section class="search-section">
      <h2 class="search-section-title">곡</h2>

      <div th:if="${songs == null or #lists.isEmpty(songs)}" class="search-empty">
        <p>일치하는 곡이 없습니다.</p>
      </div>

      <div th:if="${songs != null and !#lists.isEmpty(songs)}" class="search-results">
        <div th:each="song : ${songs}" class="search-result-item">
          <a th:href="@{'/songs/' + ${song.id}}" class="search-result-link">
            <strong th:text="${song.title}">제목</strong>
            <span class="search-result-meta" th:text="' - ' + ${song.artist}"> - 아티스트</span>
          </a>
        </div>
      </div>
    </section>

    <!-- 유저 결과 -->
    <section class="search-section">
      <h2 class="search-section-title">유저</h2>

      <div th:if="${users == null or #lists.isEmpty(users)}" class="search-empty">
        <p>일치하는 유저가 없습니다.</p>
      </div>

      <div th:if="${users != null and !#lists.isEmpty(users)}" class="search-results">
        <div th:each="user : ${users}" class="search-result-item">
          <a th:href="@{'/users/' + ${user.id}}" class="search-result-link">
            <strong th:text="${user.nickname}">닉네임</strong>
            <span class="search-result-meta"
                  th:if="${user.description != null}"
                  th:text="' - ' + ${user.description}"> - 소개</span>
          </a>
        </div>
      </div>
    </section>

    <!-- 칼럼 결과 -->
    <section class="search-section">
      <h2 class="search-section-title">칼럼</h2>

      <div th:if="${columns == null or #lists.isEmpty(columns)}" class="search-empty">
        <p>일치하는 칼럼이 없습니다.</p>
      </div>

      <div th:if="${columns != null and !#lists.isEmpty(columns)}" class="search-results">
        <div th:each="col : ${columns}" class="search-result-item column-result">
          <a th:href="@{'/columns/' + ${col.id}}" class="search-result-link">
            <strong th:text="${col.title}">칼럼 제목</strong>
          </a>
          <p class="column-excerpt" th:text="${#strings.abbreviate(col.content, 100)}">
            내용 일부...
          </p>
        </div>
      </div>
    </section>
  </div>

</main>

</body>
</html>
